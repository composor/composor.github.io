<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Tutorials</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='tutorial-page'>
    <nav>
      <ul class='nav--menu'>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../index.html">
            <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Composi Logo</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Composi-Logo-Solid" fill="#fff">
                  <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
                </g>
              </g>
            </svg>
          <span class='logo__link--text'>Composi</span></a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../docs/installation.html">Docs</a>
        </li>
        <li class='nav--menu__item selected'>
          <a class='nav--menu__item__link' href="./index.html">Tutorials</a>
        </li>
      </ul>
    </nav>
    <article class='tutorial__article'>
      <section>
        <div class='tutorial'>
          <h1>Lists and Keys</h1>
          <p class="tutorial__intro">Composi lets you use normal JavaScript to convert an array of items into a list.</p>
          <p>The prefered way to create a list is to use <code>map</code> on the array:</p>

          <pre>
            <code class="language-javascript">
const listItems = ['One','Two','Three', 'Four', 'Five']
class List extends Component {
  constructor(props) {
    super(props)
    this.container = 'section'
    this.state = listItems
  }
  render(listItems) {
    // Use map to output indivudal list items:
    return (
      &lt;ul class='list'>
        {
          listItems.map(item => &lt;li>{item}&lt;/li>)
        }
      &lt;/ul>
    )
  }
}</code>
          </pre>
          <p> </p>
          <h2>Rendering List Items Separately</h2>
          <p>You can create use <code>map</code> on an array to create list items. This will make our code a bit cleaner. In that case it doesn't make sense for our component to have state:</p>

          <pre>
            <code class="language-javascript">
const listItems = ['One','Two','Three', 'Four', 'Five']

// Create list items from listItems:
const items = listItems.map(item => &lt;li>{item}&lt;/li>)

class List extends Component {
  constructor(props) {
    super(props)
    this.container = 'section'
  }
  render() {
    // Use items created from array:
    return (
      &lt;ul class='list'>
        {items}
      &lt;/ul>
    )
  }
}</code>
          </pre>
          <p>The above works. If you don't like create the list items outside the class, you could move it inside the <code>render</code> function but before the <code>return</code> statement.</p>

          <h2>Keys</h2>
          <p>When you have a list created by a component, you may need to re-order them. When Composi deals with lists, it uses its virtual dom to see how to path the DOM. The nature of lists makes it very difficult to actually identify what needs to be changed in an efficient manner, resulting in whole scale re-rendering of a list. You can eliminate this problem by using keys on your lists. Keys are just unique values for each item in the list. <strong>Note:</strong> You should never use the array index as keys. This is because if you change the order of the array items, the index values remain the same. This makes the keys useless for discerning what has changed. Key values only need to be unique to the array being parsed.</p>
          <p>You use keys by having a key value exist in the array you are using. And then you output that key value on each list item. You could import a uuid module from NPM, or you could come up with your own function to create a unique id. We'll do that with our list example from above:</p>

          <pre>
            <code class="language-javascript">
// Function to create key:
function uid() {
  return Math.floor(Math.random() * 10000000 + Math.random() * 1000)
}
const listItems = [
  {
    'value: One',
    key: uid()
  },
  {
    'value: Two',
    key: uid()
  },
  {
    'value: Three',
    key: uid()
  }, 
  {
    'value: Four',
    key: uid()
  }, 
  {
    'value: Five',
    key: uid()
  }
]
class List extends Component {
  constructor(props) {
    super(props)
    this.container = 'section'
    this.state = listItems
  }
  render(listItems) {
    // Use map to output indivudal list items:
    // Output key value on each list item:
    return (
      &lt;ul class='list'>
        {
          listItems.map(item => &lt;li key={item.key}>{item.value}&lt;/li>)
        }
      &lt;/ul>
    )
  }
}
            </code>
          </pre>
          <p>When you give list items a key property, this does not get rendered to the DOM. It only gets create on the virtual dom elements. The diff and patch algorythm can use those key values to determine what changed in the list and update it efficiently.</p>

          <h2>Bad Practices</h2>
          <p>As we already mentioned, it is a bad practice to use the array indeces as keys. These are useless when trying to determine a list whose item order has changed. Another bad practice is creating a key value directly on the list item. In our case, we could use our <code>uid</code> function on each list item:</p>

          <pre>
            <code class="language-javascript">
// Bad practice - creating key on list item when it is created:
return (
  &lt;ul class='list'>
    {
      listItems.map(item => &lt;li key={uid()}>{item.value}&lt;/li>)
    }
  &lt;/ul>
)</code>
          </pre>
          <p>The problem with the above approach is each time the <code>render</code> function gets called, new key values get produced. This means the new virtual dom for the list will not match the previous version. This will for the patch algorythm to completely re-render the list. Very wasteful. It is simple better to have the key values exist on the data.</p>


          <p>&nbsp;</p>
        </div>
        <aside>
          <menu>
            <ul class="tutorials__menu">
              <li class="tutorials__menu__item">
                <a href='./index.html'>Hello World</a>
              </li>
              <li class="tutorials__menu__item">
                  <a href='./introducing-jsx.html'>Introducing JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./rendering-elements.html'>Rendering Elements</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./components-n-props.html'>Components and Props</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./state-n-lifecycle.html'>State and Lifecycle</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./conditional-rendering.html'>Conditional Rendering</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./handling-events.html'>Handling Events</a>
              </li>
              <li class="tutorials__menu__item selected">
                <a href='./lists-n-keys.html'>Lists and Keys</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./forms.html'>Forms</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lifting-state-up.html'>Lifting State Up</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./thinking-in-composi.html'>Thinking in Composi</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./jsx-in-depth.html'>JSX In Depth</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./advanced-state-management.html'>Advanced State Management</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./integrating-other-libs.html'>Integrating with Other Libraries</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./composi-without-jsx.html'>Composi Without JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./redux-mobx.html'>Using Redux or Mobx for State Management</a>
              </li>
            </ul>
          </menu>
        </aside>
      </section> 
    </article>
    <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
        </section>
      </footer>
    <script src="../js/prism.min.js"></script>
    <script src="../js/prism-jsx.js"></script>
</body>
</html>