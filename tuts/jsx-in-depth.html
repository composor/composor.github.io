<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Tutorials</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='tutorial-page'>
    <nav>
      <ul class='nav--menu'>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../index.html">
            <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Composi Logo</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Composi-Logo-Solid" fill="#fff">
                  <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
                </g>
              </g>
            </svg>
          <span class='logo__link--text'>Composi</span></a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../docs/installation.html">Docs</a>
        </li>
        <li class='nav--menu__item selected'>
          <a class='nav--menu__item__link' href="./index.html">Tutorials</a>
        </li>
      </ul>
    </nav>
    <article class='tutorial__article'>
      <section>
        <div class='tutorial'>
          <h1>JSX in Depth</h1>
          <p class="tutorial__intro">JSX is just JavaScript. It just happens to look like HTML. A JSX tag is a function that creates an HTML tag with attributes and children.</p> 
          <p>Let's take an example:</p>
          <pre>
            <code class="language-javascript">
// functional component:
function Title(title) {
  return (
    <h1 title='The title'>{title}</h1>
  )
}

// The functional component as a custom JSX tag:
&lt;Title {Hello, world!}/>

// The same tag as a hyperscript function:
h('h1', {title: 'The title'}, 'Hello, world!')

// The tag produces the following virtual node:
{
  type: "h1", 
  props: {title: "The title"}, 
  children: ["Hello, world!"]
}

// The virtual node gets converted into a DOM node:
&lt;h1>Hello, world!&lt;/h1></code>
          </pre>
          <p>JSX is just a simplier way to represent the DOM nodes your component needs to create. Because it is JavaScript, you can use it with normal JavaScript expressions to evaluate and parse the data that you need to display.</p>

          <h2>Composition</h2>
          <p>Although you can define simple JSX tags, the real strength of JSX is that it lets you you simple JSX elements combined together to create more complex ones. These parts can even be in separate files, allowing for their reuse through your app or in other apps.</p>

          <p>As an example of composition, let's create a dialog box. We are going to start with the dialog itself, which is just the border around the content:</p>

          <pre>
            <code class="language-javascript">
function FancyBorder(props) {
  console.log(props)
  return (
    &lt;div class='FancyBorder FancyBorder-maroon'>&lt;/div>
  )
}
// Inject the dialog in the document:
render(&lt;FancyBorder />)</code>
          </pre>
          <p>We'll update this to allow the user to pass in the color as a prop:</p>

          <pre>
            <code class="language-javascript">
function FancyBorder(props) {
  console.log(props)
  return (
    &lt;div class={'FancyBorder FancyBorder-' + props.color}>&lt;/div>
  )
}
// Inject the dialog in the document:
render(
  &lt;FancyBorder color="maroon" />,
  'body'
)</code>
          </pre>
          <p>So, now we have a very basic function component. But we want to be able to render it with a child component. Here is the child:</p>

          <pre>
            <code class="language-javascript">
function DialogMessage() {
  return (
    &lt;div>
      &lt;h1 class="Dialog-title">Welcome&lt;/h1>
      &lt;p class="Dialog-message">Thank you for visiting our time machine!&lt;/p>
    &lt;/div>
  )
}</code>
          </pre>
          <p>Now, the question is, how can we get the child component into the dialog box? As you saw above, we passed the color to the dialog box as a prop. We can do the same with our child component. We'll make a slight modification to FancyBorder so that it can received arbitrary child nodes. We'll do that by passing a second parameter to the function, which we'll call <code>children</code>:</p>

          <pre>
            <code class="language-javascript">
function FancyBorder(props, children) {
  console.log(props)
  return (
    &lt;div class={'FancyBorder FancyBorder-' + props.color}>
      {children}
    &lt;/div>
  )
}</code>
          </pre>
          <p>With the <code>FancyBorder</code> component set to capture a <code>children</code> prop, we can pass in our <code>DialogMessage</code> component when we render <code>FancyBorder</code>:</p>
          <p data-height="300" data-theme-id="6688" data-slug-hash="oGpwVd" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composition" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/oGpwVd/">Composition</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          
          <p>Through composition we are able to add child components to other components to build more complex solutions.</p>

          <h2>Composition with Class Components</h2>
          <p>We can use this same technique with class components. We are going to show how to use composition of JSX functional components to create a class component. We are going to start with the same <code>FancyBorder</code> component we made earlier:</p>
          <pre>
            <code class="language-javascript">
function FancyBorder(props, children) {
  console.log(props)
  return (
    &lt;div class={'FancyBorder FancyBorder-' + props.color}>
      {children}
    &lt;/div>
  )
}</code>
          </pre>
          <p>We'll use this as the base for our new component. We want to have a dialog where the user can enter a name, and after tapping a button, gets a greeting. By the way, this will be a signup for the Time Travel Program.</p>

          <h2>Issues to Deal With</h2>
          <p>Because we are going to be passing props down from a class component to child components that are function, there will be some wrapping of the props at each level. Kind of annoying, but its what JSX does in this situation. Therefore we will need to use <code>.props</code> to get at values in places where you would expect too.</p>
          <p>Here's the basic setup for our class component:</p>
          <pre>
            <code class="language-javascript">
class SignUpDialog extends Component {
  constructor(props) {
    super(props)
    this.container = 'section'
    this.state = {
      login: '',
      title:"Time Travel Program",
      message:"How should we refer to you?"
    }
  }

  render(props) {
    return (
        return (
      <FancyBorder color='maroon'>
       <DialogChildren {...{title: props.title, message: props.message, component: this}}/>
      </FancyBorder>
    )
  }
}</code>
          </pre>
          <p>So, we have a class component that returns our <code>FancyBorder</code> component, while passing it props for <code>color</code> and <code>children</code>. Notice how <code>dialogChildren</code> is get passed props and <code>this</code>. That will pass a reference of the class component down to the children so they have access to the parent's properties. In particular we want to expose the parent's state and event methods to the children.</p>

          <p>We'll need a component to create the default title and greetign for the dialog. We'll call that component <code>Dialog</code>. We'll also need a component to be the form where the user enters there name an taps a button to submit it. We'll call that <code>FormInputs</code>. Then we'll create a function called <code>dialogChildren</code> which will combine these to. We'll pass this function to the <code>FancyBorder</code> component as its <code>children</code> prop. And, we will add some methods and events to make name submission work. Here is the complete solution:</p>

          <p data-height="300" data-theme-id="6688" data-slug-hash="vedgVR" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composition 2" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/vedgVR/">Composition 2</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p>As you can see, with some work you can use JSX composition to advantage, even inside a class component.</p>

          <h2>Containement</h2>
          <p>Another pattern for JSX development is container, where on component contains another. In our previous example we used props to pass in a function that composed several JSX function components together. We can also pass in custom JSX tags for a similar composition pattern. Take a look at the following example. Notice how we have our custom tags defined: <code>&lt;Contacts /></code> and <code>&lt;Chat /></code>, and that we pass them to the <code>SplitPane</code> tag as its value for left and right:</p>
          <p data-height="300" data-theme-id="6688" data-slug-hash="yzvVEx" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Containment" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/yzvVEx/">Containment</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p></p>

          <p>&nbsp;</p>
        </div>
        <aside>
          <menu>
            <ul class="tutorials__menu">
              <li class="tutorials__menu__item">
                <a href='./index.html'>Hello World</a>
              </li>
              <li class="tutorials__menu__item">
                  <a href='./introducing-jsx.html'>Introducing JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./rendering-elements.html'>Rendering Elements</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./components-n-props.html'>Components and Props</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./state-n-lifecycle.html'>State and Lifecycle</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./conditional-rendering.html'>Conditional Rendering</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./handling-events.html'>Handling Events</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lists-n-keys.html'>Lists and Keys</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./forms.html'>Forms</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lifting-state-up.html'>Lifting State Up</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./thinking-in-composi.html'>Thinking in Composi</a>
              </li>
              <li class="tutorials__menu__item selected">
                <a href='./jsx-in-depth.html'>JSX In Depth</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./advanced-state-management.html'>Advanced State Management</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./integrating-other-libs.html'>Integrating with Other Libraries</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./composi-without-jsx.html'>Composi Without JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./immutable-data.html'>Immutable Data</a>
              </li> 
            </ul>
          </menu>
        </aside>
      </section> 
    </article>
    <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
        </section>
      </footer>
    <script src="../js/prism.min.js"></script>
    <script src="../js/prism-jsx.js"></script>
</body>
</html>