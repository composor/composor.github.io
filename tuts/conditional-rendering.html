<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Tutorials</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='tutorial-page'>
    <nav>
      <ul class='nav--menu'>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../index.html">
            <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Composi Logo</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Composi-Logo-Solid" fill="#fff">
                  <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
                </g>
              </g>
            </svg>
          <span class='logo__link--text'>Composi</span></a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../docs/installation.html">Docs</a>
        </li>
        <li class='nav--menu__item selected'>
          <a class='nav--menu__item__link' href="./index.html">Tutorials</a>
        </li>
      </ul>
    </nav>
    <article class='tutorial__article'>
      <section>
        <div class='tutorial'>
          <h1>Conditional Rendering</h1>
          <p class="tutorial__intro">Composi allows you to conditionally render the elements that a component produces.</p>
          <p>You can use JavaScript operators like <code>if</code> and <code>else</code>, or the <code>ternary</code> operator when making decisions about what markup a component should create.</p>

          <p>As an example of conditional rendering, lets use a situation where depending on whether the user is logged in or not, we render two different sub-components. Here's the two possible components:</p>

          <pre>
            <code class="language-javascript">
function UserGreeting(props) {
  return &lt;h1>Welcome back!&lt;/h1>;
}

function GuestGreeting(props) {
  return &lt;h1>Please sign in.&lt;/h1>;
}</code>
          </pre>
          <p>Now lets create a component that returns these two sub-components and based on the loggedon condition, returns one or the other:</p>

          <pre>
            <code class="language-javascript">
function UserGreeting(props) {
  return &lt;h1>Welcome back!&lt;/h1>
}

function GuestGreeting(props) {
  return &lt;h1>Please sign in.&lt;/h1>;
}

function Greeting(props) {
  const isLoggedIn = props.isLoggedIn;
  if (isLoggedIn) {
    return &lt;UserGreeting />
  }
  return &lt;GuestGreeting />
}

render(
  // Try changing to isLoggedIn={true}:
  &lt;Greeting isLoggedIn={true} />,
  'body'
);</code>
          </pre>
          <p> </p>

          <h2>Conditional Element Variables</h2>
          <p>You can use a variable to conditional store an element and the return that in the <code>render</code> function. In the next example we are going to combined the Greeting element from above with conditional rendering of buttons for a login. When the user clicks the button, the logged in status will change visibly on the page. Notice how we store the button in a variable and out put it with <code>{button}</code> in the component's <code>render</code> function, keeping it very clean:</code></p>

          <pre>
            <code class="language-javascript">
function UserGreeting(props) {
  return &lt;h1>Welcome back!&lt;/h1>;
}

function GuestGreeting(props) {
  return &lt;h1>Please sign up.&lt;/h1>;
}
function Greeting(props) {
  const isLoggedIn = props.isLoggedIn;
  if (isLoggedIn) {
    return &lt;UserGreeting />;
  }
  return &lt;GuestGreeting />;
}

function LoginButton(props) {
  return (
    &lt;button class='login'>
      Login
    &lt;/button>
  );
}

function LogoutButton(props) {
  return (
    &lt;button class='logout'>
      Logout
    &lt;/button>
  );
}

class LoginControl extends Component {
  constructor(props) {
    super(props);
    this.container = 'section'
    this.state = {isLoggedIn: false};
  }

  // Use handleEvent to manage button clicks:
  handleEvent(e) {
    if (e.target.className === 'login') {
      this.handleLoginClick(e)
    } else if (e.target.className === 'logout') {
      this.handleLogoutClick(e)
    }
  }

  handleLoginClick() {
    this.setState({isLoggedIn: true});
  }

  handleLogoutClick() {
    this.setState({isLoggedIn: false});
  }

  // Use lifecycle event to add event listener.
  // Pass in component thru "this" so we can access "handleEvent":
  componentWasCreated() {
    this.element.addEventListener('click', this)
  }

  render() {
    const isLoggedIn = this.state.isLoggedIn;

    let button = null;
    if (isLoggedIn) {
      button = &lt;LogoutButton />;
    } else {
      button = &lt;LoginButton />;
    }

    return (
      &lt;div>
        &lt;Greeting isLoggedIn={isLoggedIn} />
        {button}
      &lt;/div>
    );
  }
}

const login = new LoginControl()</code>
          </pre>
          <p> </p>
          <h2>Using the Logical &amp;&amp; Operator</h2>
          <p>You can also use the JavaScript logical && operator for conditional situations. In the above example we can simplify the <code>handleEvent</code> method by using the &amp;&amp; operator as a condition check:</p>

          <pre>
            <code class="language-javascript">
  // Original with if statement:
  handleEvent(e) {    
    if (e.target.className === 'login') {
      this.handleLoginClick(e)
    } else if (e.target.className === 'logout') {
      this.handleLogoutClick(e)
    }
  }
  
  // New version using &amp;&amp;
    handleEvent(e) {    
    e.target.className === 'login' &amp;&amp; this.handleLoginClick(e)
    e.target.className === 'logout'&amp;&amp; this.handleLogoutClick(e)
  }</code>
          </pre>
          <p>When you see an expression like this, read it like this: When e.target.className equals "login", execute this.handleLoginClick(e)". Basically, the first part is a check, if it is true then the &amp;&amp; will execute whatever follows.</p>

          <p>We can also use the &amp;&amp; operator to conditionally render an element. If the first statement is true, then return the element to render. In the next example, the element will render only if the number of messages is greater than 0:</p>

          <pre>
            <code class="language-javascript">
function Mailbox(props) {
  const unreadMessages = props.unreadMessages;
  // Conditionally render the H2 message based on 
  // the number of messages using the &amp;&amp: operator:
  return (
    &lt;div>
      &lt;h1>Hello!&lt;/h1>
      {unreadMessages.length > 0 &&
        &lt;h2>
          You have {unreadMessages.length} unread messages.
        &lt;/h2>
      }
    &lt;/div>
  );
}

const messages = ['Composi', 'Re: Composi', 'Re:Re: Composi'];
render(&lt;Mailbox unreadMessages={messages} />, 'section')</code>
          </pre>
          <p> </p>
          <h2>Inline Ternary Operator</h2>

          <p>Another way to render things conditionally is to use the JavaScript ternary operator: <code>condition ? true : false</code>. The ternary operator is great for reducing conditional <code>if/else</code> statements to a single line. However, creating nested ternary statements results in difficult to read code, so avoid doing that.</p>

          <p>You can use the ternary operator for simple decisions about what to print out based on a condition:</p>
          <pre>
            <code class="language-javascript">
render() {
  const isLoggedIn = this.state.isLoggedIn;
  return (
    &lt;div>
      The user is &lt;b>{isLoggedIn ? 'currently' : 'not'}&lt;/b> logged in.
    &lt;/div>
  );
}</code>
          </pre>
          <p>As you can see, using the ternary operator makes the test clean and easy to reason about.</p>

          <p>In our previous example we had a <code>render</code> function like this:</p>
          <pre>
            <code class="language-javascript">
render() {
  const isLoggedIn = this.state.isLoggedIn;

  if (isLoggedIn) {
    button = &lt;LogoutButton />;
  } else {
    button = &lt;LoginButton />;
  }

  return (
    &lt;div>
      &lt;Greeting isLoggedIn={isLoggedIn} />
      {button}
    &lt;/div>
  );
}</code>
          </pre>
          <p>Using the ternary operator, we can simplify the logic to this:</p>

          <pre>
            <code class="language-javascript">
render() {
  const isLoggedIn = this.state.isLoggedIn;

  return (
    &lt;div>
      { isLoggedIn ? &lt;LogoutButton /> : &lt;LoginButton /> }
    &lt;/div>
  );
}</code>
          </pre>
          <p> </p>
          <h2>Prevent an Component from Rendering</h2>
          <p>Sometimes you want to not render a component from rendering. The best way to do that is to test for a condition and have the <code>render</code> function return <code>null</code>. Notice how we do that with the <code>WarningBanner</code> component below:</p>

          <pre>
            <code class="language-javascript">
function WarningBanner(props) {
  if (!props.warn) {
    return null;
  }

  return (
    &lt;div className="warning">
      Warning!
    &lt;/div>
  );
}

class Page extends Component {
  constructor(props) {
    super(props);
    this.state = {showWarning: true}
  }

  handleToggleClick(e) {
    this.setState(prevState => ({
      showWarning: !prevState.showWarning
    }));
  }
  
  handleEvent(e) {
    e.target.id === 'toggle' && this.handleToggleClick(e)
  }
  componentWasCreated() {
    this.element.addEventListener('click', this)
  }
  
  render() {
    return (
      &lt;div>
        &lt;WarningBanner warn={this.state.showWarning} />
        &lt;button id='toggle'>
          {this.state.showWarning ? 'Hide' : 'Show'}
        &lt;/button>
      &lt;/div>
    );
  }
}

const page = new Page()</code>
          </pre>
          <p>Because <code>WarningBanner</code> is a child component to <code>Page</code>, when <code>WarningBanner</code> returns null, that only affects its output. It will not affect the output of the button nor the lifecycle methods and events.</p>

          <p>&nbsp;</p>
        </div>
        <aside>
          <menu>
            <ul class="tutorials__menu">
              <li class="tutorials__menu__item">
                <a href='./index.html'>Hello World</a>
              </li>
              <li class="tutorials__menu__item">
                  <a href='./introducing-jsx.html'>Introducing JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./rendering-elements.html'>Rendering Elements</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./components-n-props.html'>Components and Props</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./state-n-lifecycle.html'>State and Lifecycle</a>
              </li>
              <li class="tutorials__menu__item selected">
                <a href='./conditional-rendering.html'>Conditional Rendering</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./handling-events.html'>Handling Events</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lists-n-keys.html'>Lists and Keys</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./forms.html'>Forms</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lifting-state-up.html'>Lifting State Up</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./thinking-in-composi.html'>Thinking in Composi</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./jsx-in-depth.html'>JSX In Depth</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./advanced-state-management.html'>Advanced State Management</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./integrating-other-libs.html'>Integrating with Other Libraries</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./composi-without-jsx.html'>Composi Without JSX</a>
              </li>
            </ul>
          </menu>
        </aside>
      </section> 
    </article>
    <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
        </section>
      </footer>
    <script src="../js/prism.min.js"></script>
    <script src="../js/prism-jsx.js"></script>
</body>
</html>