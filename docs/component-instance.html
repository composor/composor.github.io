<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Docs</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='documentation-page'>
  <nav>
    <ul class='nav--menu'>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../index.html">
          <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Composi Logo</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Composi-Logo-Solid" fill="#fff">
                <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
              </g>
            </g>
          </svg>
        <span class='logo__link--text'>Composi</span></a>
      </li>
      <li class='nav--menu__item selected'>
        <a class='nav--menu__item__link' href="./installation.html">Docs</a>
      </li>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../tuts/index.html">Tutorials</a>
      </li>
    </ul>
  </nav>
  <article class='docs__article'>
    <section>
      <div class='docs'>
          <h1>Component Class</h1>
          <p class="docs__intro">There are two ways to use the Component class: by creating an immediate instance of it, or by extending it. Here we're going to look at how to create components by making instances of the Component class. This is a quick and easy way to create components. Extending the Component class enables you to create more complex components through methods and properties. But if your component is not too complex, an instance will do.</p>

          <p>When you create an instance of Component, you do so by passing it an object of options. Those are:</p>
          <ol>
            <li><code>container</code> - the element in the DOM in which the component will be rendered. Multiple components can share the same container. In such a case they will be appended to the container one after the other in the order you first render them or set their initial state.</li>
            <li><code>render</code> - a function that returns markup for the element. This function may optionally take some data that it uses to create dynamic content for the component. You may want to use inline events in your markup to capture user interactions. Read the <a target='__blank' href='./events.md'>documentation for events</a> for more information.</li>
            <li><code>state</code> - some data that the component will use when rendering. This could be primitive types, or an object or array.</li>
            <li><code>Lifecycle methods</code> - these allow you to do things during the lifecycle of the component.</li>
          </ol>

          <p>Every component expects at least a container and a render function. The container is a selector for the element in which you want your component to render. If no container is provided, the component will render in the body tag. The render function defines the markup that the component will create.</p>

          <h2>Creating an Instance of Component</h2>

          <p>Let's look at the first option, creating an instance of <code>Component</code>. When creating a component, you need to provide at least two arguments: the <code>container</code>, which is the element into which the component will be rendered and a render function. The <code>container</code> could just be the document body. Or you could have a basic html shell with predefined containers into which you will render your components. Using a shell means your document reaches first render quicker. </p>

          <p>The component's <code>render</code> function is used to define markup that will get converted into elements and inserted into the DOM. The render function is also used every time the component is updated. Rendering the component with new data or changing the state of a stateful component causes the component use this render function to create a new virtual dom. Composi compares the component's new virtual dom with its previous one. If they do not match, the new one is used to patch and update the DOM. This results in fast and efficient updating of the DOM based on current state.</p>

          <p>By default Composi uses <code>JSX</code> for markdown. You can learn more about <code>JSX</code> in the <a href='./jsx.md' target='__blank'>documentation</a>. If you prefer, you can use the hyperscript function <a href='./hyperscript.md' target='__blank'>h</a> to define your markup. For the purpose of this tutorial we're going to use <code>JSX</code> for simplicity's sake.</p>

          <h2>Component Instance</h2>
          <p>When you create a new Component instance, you initialize it by passing an object of options to the constructor. In this case, the options will be <code>container</code> and <code>render</code>:</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

const hello = new Component({
  container: '#helloMessage',
  render: (name) => &lt;p>Hello, {name}!&lt;/p>
})

// Render the component to the DOM by passing data to the component's update method:
hello.update('World') // Returns &lt;p>Hello, World!&lt;/p></code>
          </pre>

          <p> </p>
          <h2>Stateless Component</h2>
          <p>In the previous example we rendered the component in the DOM by running the <code>update</code> function on it an passing it some data. This is called a stateless component. It will not render anything unless we pass it some data through the <code>update</code> method.</p>

          <p>We can also design a component that uses a complex object as its source of data:</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

// A person object:
const person = {
  name: {
    firstName: 'Joe',
    lastName: 'Bodoni'
  },
  job: 'Mechanic',
  age: 23
}

// Define a component instance:
const user = new Component({
  container: '#userOutput',
  render: (person) => (
  &lt;div>
    &lt;p>Name: {person.name.first} {person.name.last}&lt;/p>
    &lt;p>Job: {person.job}&lt;/p>
  &lt;/div>)
})

// Render the component with the person object:
user.update(person)</code>
          </pre>

          <p> </p>
          <h2>Dataless Components</h2>
          <p>Usually when you create stateless components you'll pass them data through their <code>update</code> method. But you could also make a component that does not consume any data. It would just create some state markup:</p>

          <pre>
            <code class="language-javascript">
// Render title component, no data needed:
const title = new Component({
  container: 'header',
  // Define render function that returns state markup:
  render: () => &lt;h1>This is a Title!&lt;/h1>
})
// Render component without data:
titleComponent.update()
            </code>
          </pre>

          <p>Usually if you want to create dataless components, that would be a good fit to use <a href='./functional-components.html' target='__blank'>functional components</a>.</p>

          <p> </p>
          <h2>Using Map to Loop Arrays</h2>
          <p>You can also use an array as the source of data for a component. This can be an array of simple types or of objects. In order to output the contents of an array you'll need to use the <code>map</code> function on the array and return the markup for each array loop instance:</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

const fruits = ['Apples', 'Oranges', 'Bananas']

const fruitList = new Component({
  container: '#fruits',
  // Loop over the fruits array with "map":
  render: (fruits) => (
    &lt;ul>
      {
        fruits.map(fruit => &lt;li>{fruit}&lt;/li>)
      }
    &lt;/ul>)
})
// Render the list of fruits:
fruitList.update(fruits)</code>
          </pre>
          <p>Using this same pattern, we can output an array of objects:</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

const people = [
  {
    firstName: 'Joe',
    lastName: 'Bodoni',
    job: 'Mechanic'
  },
  {
    firstName: 'Ellen',
    lastName: 'Vanderbilt',
    job: 'Lab Technician'
  },
  {
    firstName: 'Sam',
    lastName: 'Anderson',
    job: 'Developer'
  }
]

const peopleList = new Component({
  container: '#people',
  render: (people) => (
    &lt;ul>
      {
        people.map(person => (
          &lt;li>
          &lt;div>Name: {person.firstName} {person.lastName}&lt;/div>
          &lt;div>Job: {person.job}&lt;/div>
          &lt;/li>
        ))
      }
    &lt;/ul>)
})

// Render the peopleList component:
peopleList.update(people)</code>
          </pre>

          <p> </p>
          <h2>Understanding Component Instances</h2>
          <p>When you create an instance of Component with the <code>new</code> keyword, you do so by passing in a object literal of properties and values. Because of this, the scope of those properties is not the component but the object itself. This means that one property does not have access to another, even though they are defined in the same object literal. The only way to access these is from the instance itself. For example, suppose we create a new component instance with state. If we want to access that state inside an event, we would need to do so through the variable we used to create the instance:</p>

          <pre>
            <code class="language-javascript">
const person = new Component({
  container: '#person',
  state: personObj,
  render: (person) => (
    &lt;div>
        &lt;h3>{person.firstName} {person.lastName}&lt;/h3>
        &lt;h4>{person.job}&lt;/h4>
    &lt;/div>
  )
})</code>
          </pre>

          <p> </p>
          <h2>Anti-Patterns</h2>
          <p>Although it is possible to access a Component instance's properties as we've shown above, this is not ideal. Component instances are best used when the purpose is simple and straightforward. If you have need to directly access properties of a component or to have one with custom properties, then you want to instead extend the Component class. You can learn more about extending the Component class in its <a href='./extending-component.html' target='__blank'>docs</a>.</p>

          <h2>Stateful Component</h2>
          <p>Besides stateless components that receive data through their <code>update</code> method, you can create stateful components. When you create a stateful component, there is no need to run <code>update</code> on it. The act of giving it state will cause it to render in the document. Notice how we use the <code>state</code> property on the component instance:</p>
          <pre>
            <code class="language-javascript">
// Define component:
const hello = new Component({
  container: 'body',
  render: (name) => &lt;h1>Hello, {name}!&lt;/h1>
})

// Setting state on the Component instance will cause the component to render to the DOM into the body tag:
hello.state = 'World'</code>
          </pre>

          <p> </p>

          <h2>Lifecycle Methods</h2>
          <p>You can give a component instance a lifecycle method as well. There are four:</p>

          <ol>
            <li>componentWasCreated</li>
            <li>componentWillUpdate</li>
            <li>componentDidUpdate</li>
            <li>componentWillUnmount</li>
          </ol>

          <p>Of the four, the ones you will use most often will be <code>componentWasCreated</code> and <code>componentDidUpdate</code>.</p>

          <p>You would use a lifecycle method when you want to be able to run some code at a particular time in the component's life. For example, you would use <code>componentWasCreate</code> to attach an event listener to the component. Or you could use <code>componentWasUpdate</code> to trigger some other action.</p>
          <p>In the following example we use <code>componentWasCreate</code> to launch a setInterval loop. Because this component has state assigned, as soon as we run <code>update</code> on it, the loop kicks in.</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

function tick() {
  clock.setState({
    time: new Date()
  });
}
let timerID
const clock = new Component({
  root: '#clock',
  state: {time: new Date()},
  render: (date) => {
    return (
    &lt;div>
      &lt;h2>The Current Time&lt;/h2>
      &lt;p>It is {date.time.toLocaleTimeString()}.&lt;/p>
    &lt;/div>
  )},

  componentWasCreated() {
    timerID = setInterval(
      () => {
        tick()
      },
      1000
    );
  },

  componentWillUnmount() {
    clearInterval(timerID);
  }
})

clock.update()</code>
          </pre>

          <p>To learn more about lifecycle events, consult their <a href="./lifecycle-methods.html" target='__blank'>docs</a>.</p>
          <p>&nbsp;</p>
          
          
      </div>

      <aside>
        <menu>
          <ul class="docs__menu">
            <li class="docs__menu__item">
              <a href='./installation.html'>Installation</a>
            </li>
            <li class="docs__menu__item">
              <a href='./render.html'>Render</a>
            </li>
            <li class="docs__menu__item">
              <a href='./functional-components.html'>Functional Components</a>
            </li>
            <li class="docs__menu__item selected">
              <a href='./component-instance.html'>Component Class</a>
            </li>
            <li class="docs__menu__item">
              <a href='./extending-component.html'>Extending Component</a>
            </li>
            <li class="docs__menu__item">
              <a href='./state.html'>State</a>
            </li>
            <li class="docs__menu__item">
              <a href='./jsx.html'>JSX</a>
            </li>
            <li class="docs__menu__item">
              <a href='./h.html'>H for Hyperscript</a>
            </li>
            <li class="docs__menu__item">
              <a href='./template-literals.html'>Template Literals</a>
            </li>
            <li class="docs__menu__item">
              <a href='./styles.html'>Styles</a>
            </li>
            <li class="docs__menu__item">
              <a href='./lifecycle-methods.html'>Lifecycle Methods</a>
            </li>
            <li class="docs__menu__item">
              <a href='./events.html'>Events</a>
            </li>
            <li class="docs__menu__item">
              <a href='./redux-mobx.html'>Redux and Mobx</a>
            </li>
            <li class="docs__menu__item">
              <a href='./hydration.html'>Hydration</a>
            </li>
            <li class="docs__menu__item">
              <a href='./about.html'>About</a>
            </li>
          </ul>
        </menu>
      </aside>
    </section> 
  </article>
  <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
      </section>
    </footer>
  <script src="../js/prism.min.js"></script>
  <script src="../js/prism-jsx.js"></script>
</body>
</html>