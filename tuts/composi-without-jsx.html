<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Tutorials</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='tutorial-page'>
    <nav>
      <ul class='nav--menu'>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../index.html">
            <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Composi Logo</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Composi-Logo-Solid" fill="#fff">
                  <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
                </g>
              </g>
            </svg>
          <span class='logo__link--text'>Composi</span></a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../docs/installation.html">Docs</a>
        </li>
        <li class='nav--menu__item selected'>
          <a class='nav--menu__item__link' href="./index.html">Tutorials</a>
        </li>
      </ul>
    </nav>
    <article class='tutorial__article'>
      <section>
        <div class='tutorial'>
          <h1>Composi Without JSX</h1>
          <p class="tutorial__intro">Although we love JSX because of its brevity and clarity, some people really dislike it.</p>
          <p>You can use Composi without JSX. You have two options: the Composi <a target='__blank' href='../docs/h.html'>h</a> function or <a href='https://www.npmjs.com/package/hyperx-es6' target='__blank'>Hyperx-ES6</a>.</p>

          <h2>H</h2>
          <p>The <code>h</code> function lets you use hyperscript syntax to designate the HTML you want to create. When working with Composi, you will always be import the <code>h</code> function into your files to enable Composi's virtua dom. A Composi project is automatically configured to let <a target="__blank" href="http://babeljs.io">Babel</a> know know to use it when dealing with JSX. So, whether you use JSX or <code>h</code>, but will result in the creation of the same virtual node. Take the following for example:</p>
          
          <pre>
            <code class="language-javascript">
function Title(props) {
  return (
    &lt;h1 class='title' title={`Hello, ${props.name}!`}>Hello, {props.name}!&lt;/h1>
  )
}

render(&lt;Title {...{name: 'Ellen'}} />, 'article')

// The virtual node created is:
{
  type: "h2", 
  props: {
    class: "title", 
    title: "Hello, Ellen!"
  }, 
  children: ["Hello, ", "Ellen", "!"]
}</code>
          </pre>
          <p>Now we can create the same result using <code>h</code>:</p>
          <pre>
            <code class="language-javascript">
function titleMaker(name) {
  return h(
    'h1',
    {
      class: 'title',
      title: `Hello, ${name}!`
    },
    [
      `Hello, ${name}!`
    ]
  )
}
const title = titleMaker('Ellen')
render(title, 'section')
// title:
{
  type: "h1", 
  props: {
    class: "title", 
    title: "Hello, Ellen!"
  }, 
  children: ["Hello, Ellen!"]
}</code>
          </pre>
          <p>As you can see from the <code>titleMaker</code> function, it is basically a functional representation of the virtual node it will create. And its virtual node is basically identical to the one created by the JSX tag. The main difference between the JSX and <code>h</code> versions is line numbers: JSX - 5 lines, <code>h</code> - 12 lines. Of course you can delete white space in an <code>h</code> function definition, but you'll also reduce legibility.</p>

          <h2>Subcomponents With H</h2>
          <p>You can also create subcomponents when using <code>h</code>. You write a function that returns the required hyperscript. Then you enclude it as an interpolation in the parent. Because this is hyperscript syntax, you'll need to use <code>${}</code> for interpolation:</p>

          <pre>
            <code class="language-javascript">
const fruits = ['Apples', 'Oranges', 'Bananas']

// Define fruit list item:
function listItem(fruit) {
  return h(
    'li',
    {
      class: 'list__item--fruit'
    },
    [`${fruit}`]
  )
}

// Create fruit list:
const fruitList = h(
  'ul',
  {
    class: 'list--fruits'
  },
  // Parse fruits array and create list items:
  [fruits.map(fruit => listItem(fruit))]
)

render(fruitList, 'body')</code>
          </pre>
          <p>If you prefer functional over classes, you will probably likeusing the <code>h</code> funtion.</p>

          <h2>Hyperx-ES6</h2>
          <p>Another alternative to JSX is <a target='__blank' href='https://www.npmjs.com/package/hyperx'>Hyperx</a>. The original version is in CommonJS format and cannot be easily imported into a Composi project. Therefore we've create a clone called Hyperx. The only difference is that Hyperx-ES6 gets exported as an ES6 module. This means you can use normal ES6 module import syntax and Rollup and bundle it properly. Hyperx allows you to ES6 template literal instead of JSX. The results are the same. The biggest difference in use will be in the text editor. JSX with get proper syntax highlighting, whereas Hyperx template literals will be treated as strings.</p>

          <h2>Hyperx Converts Template Literals into Hyperscript</h2>
          <p>Hyperx converts template literals into the same format as JSX and <code>h</code>. In this case, since we tell Hyperx to you the Composi <code>h</code> function, the result will be a virtual node that Composi can use.</p>

          <h2>Installation and Use</h2>
          <p>You'll need to install Hyperx-ES6 in your project and import it into any file where you want to use it. You'll have to make an update to your project's <code>gulpfile.js</code> to know to include Hyperx when it bundles all the dependencies. And you'll also need to let Babel know to use Hyperx instead of Composi's <code>h</code> function for create virtual nodes.</p>

          <pre>
            <code class="language-bash">
# cd to your project and run:
npm i -D hyperx-es6
            </code>
          </pre>
          <p>In your project's <code>app.js</code> file add:</p>
          
          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'
import {hyperx} from 'hyperx-es6'

// Tell Hyperx to use the Composi h function,
// by passing it to Hyperx:
const html = hyperx(h)</code>
          </pre>
          <p>With this in your file, you can start using Hyperx. You could make functional components like with JSX, or use it inside of a class component. Below are some functional components with composition. We need to use <code>${}</code> for interpolation. Note that when using Hyperx, you'll be using the tagged template literal <code>html</code> that you designated after importing Hyperx-ES6:</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'
import {hyperx} from 'hyperx-es6'

// Tell Hyperx to use the Composi h function,
// by passing it to hyperx:
const html = hyperx(h)

function tileGreeting(name) {
  // We use the
  return html`<h1>Hello, ${name}!</h1>`
}

function subTitle() {
  return html`<h2>This is a Subtitle</h2>`
}

function headerComponent() {
  return `
  ${
    titleGreeting('Wilson') 
  }
  ${
    subTitle()
  }`
}
render(headerComponent(), 'header')
            </code>
          </pre>
          <p> </p>
          <h2>Using Hyperx with a Class Component</h2>
          <p>You can also use Hyperx with class-based components. In the example below we have subcomponents using Hyperx, <code>listItem</code> and <code>disclosure</code>. We integrate them into the parent component <code>List</code>, which is an extension of Component. Because the subcomponents are functions, we need to invoke them with interpolation, so they get enclosed with <code>${}</code>. Our <code>List</code> component also implements events. You can click on a list item to get an alert and you can add a new list item as well.</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'
import {hyperx} from 'hyperx-es6'

const html = hyperx(h)

const fruits = [
  {
    key: 101,
    name: 'Apples'
  },
  {
    key: 102,
    name: 'Oranges'
  },
  {
    key: 103,
    name: 'Bananas'
  }
]

// initial key value to increase for each new item.
let key = 10000
function listItem(fruit) { 
  return html`
    &lt;div>
      &lt;h3>${fruit.name}&lt;/h3>
    &lt;/div>
    `
}
function disclosure() { 
  return html`
    &lt;aside>
      &lt;span class='disclosure'>&lt;/span>
    &lt;/aside>`
}
class List extends Component {
  constructor(opts) {
    super(opts)
    this.state = fruits
    this.key = 1000
  }
  render() {
    let state = this.state
    return html`
      &lt;div class='main-container'>
        &lt;p class='form-container'>
          &lt;input id='nameInput' type='text'>
          &lt;button class='addItem'>Add&lt;/button>
        &lt;/p>
        &lt;ul class='list'>
        ${
          fruits.map(fruit => html`
            &lt;li class='list-item'>
            ${listItem(fruit)}
            ${disclosure()}
            &lt;/li>
          `)
        }
      &lt;/ul>
    &lt;/div>`
  }
  handleEvent(e) {
    if (e.target.nodeName === 'LI') {
      this.announceItem(e)
    } else if (e.target.nodeName !== 'LI' && e.target.className !== 'addItem') {
      this.announceItem(e)
    } else if (e.target.className === 'addItem') {
      this.addItem()
    }
  }
  addItem() {
    const nameInput = this.element.querySelector('#nameInput')
    const name = nameInput.value
    if (!name) {
      alert('Please provide a name!')
      return
    }
    this.setState({name, key: this.key++}, this.state.length)
    nameInput.value = ''
    nameInput.focus()
  }
  announceItem(e) {
    if (e.target.nodeName === 'LI') {
      alert(e.target.textContent.trim())
    } else {
      const li = e.target.closest('li')
      if (li) alert(li.textContent.trim())
    }
    
  }
  componentWasCreated() {
    this.element.addEventListener('click', this)
  }
}
const list = new List({
  container: 'section'
})
list.update()</code>
          </pre>


          <p>&nbsp;</p>
        </div>
        <aside>
          <menu>
            <ul class="tutorials__menu">
              <li class="tutorials__menu__item">
                <a href='./index.html'>Hello World</a>
              </li>
              <li class="tutorials__menu__item">
                  <a href='./introducing-jsx.html'>Introducing JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./rendering-elements.html'>Rendering Elements</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./components-n-props.html'>Components and Props</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./state-n-lifecycle.html'>State and Lifecycle</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./conditional-rendering.html'>Conditional Rendering</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./handling-events.html'>Handling Events</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lists-n-keys.html'>Lists and Keys</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./forms.html'>Forms</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lifting-state-up.html'>Lifting State Up</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./thinking-in-composi.html'>Thinking in Composi</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./jsx-in-depth.html'>JSX In Depth</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./advanced-state-management.html'>Advanced State Management</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./integrating-other-libs.html'>Integrating with Other Libraries</a>
              </li>
              <li class="tutorials__menu__item selected">
                <a href='./composi-without-jsx.html'>Composi Without JSX</a>
              </li>
            </ul>
          </menu>
        </aside>
      </section> 
    </article>
    <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
        </section>
      </footer>
    <script src="../js/prism.min.js"></script>
    <script src="../js/prism-jsx.js"></script>
</body>
</html>