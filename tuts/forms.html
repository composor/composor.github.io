<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Tutorials</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='tutorial-page'>
    <nav>
      <ul class='nav--menu'>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../index.html">
            <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Composi Logo</title>
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Composi-Logo-Solid" fill="#fff">
                  <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
                </g>
              </g>
            </svg>
          <span class='logo__link--text'>Composi</span></a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' href="../docs/installation.html">Docs</a>
        </li>
        <li class='nav--menu__item selected'>
          <a class='nav--menu__item__link' href="./index.html">Tutorials</a>
        </li>
        <li class='nav--menu__item'>
          <a class='nav--menu__item__link' target='__blank' href="https://github.com/composor/awesome-composi">Resources</a>
        </li>
      </ul>
    </nav>
    <article class='tutorial__article'>
      <section>
        <div class='tutorial'>
          <h1>Forms</h1>
          <p class="tutorial__intro">Forms are different from other HTML elements. They keep track of their state through properties such as <code>value</code>, <code>checked</code>, etc.</p>
          <p>As an example, let's use the following form. We're going to want to keep track of the value of the input when the user types:</p>
          <pre>
            <code class="language-html">
&lt;form>
  &lt;label>
    Name:&lt;input type="text">
  &lt;/label>
  &lt;input type="submit" value="Submit">
&lt;/form></code>
          </pre>

          <p>We will need to create the form with the <code>render</code> function of a class component. We'll track the input changes with an inline event for now. We'll give the <code>form</code> element a <code>onsubmit</code> event handler.</p>

         <p data-height="300" data-theme-id="6688" data-slug-hash="rYaGdE" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi Tuts - Forms-1" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/rYaGdE/">Composi Tuts - Forms-1</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p>Now the state of the form is owned by the component. As the user enters data in the input, it value is being set on the component's state. This keeps the component state insynch with the form at all times.</p>
          <p>You can use this same technique on textareas, checkboxes, radio buttons, etc. to keep track of their state in a component.</p>

          <h2>The Select Tag</h2>
          <p>This one is a bit tricky. That's because its selection is determined by the value of its <code>selectedIndex</code> property. Let's look at the follow example where are form has a select tag. We want to render it with a default value other than the first options. We want it to render showing Coconut" as the selection:</p>

          <p data-height="300" data-theme-id="6688" data-slug-hash="GOgMBv" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi Tuts - Forms-2" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/GOgMBv/">Composi Tuts - Forms-2</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p>We've set the default value as "coconut" in the state assignment in the class constructor. With this you would expect to see that as the choice when the component renders. However, that is not what happens. The select tag renders showing the first option: "Grapefuit". However, if we click on the button, it alerts "Your favorite flavor is: coconut". Just what we would expect. Why isn't the correct selection showing. That's because of the select tag's property of <code>selectedIndex</code>. That property determines what option is shown.</p>

          <h2>What Went Wrong</h2>
          <p>So why doesn't this work? Because of how we rendered the select tag. Rendering it with a value does not cause the <code>selectedIndex</code> to be set. Normally, if you set the value of a select tag, that will trigger setting the correct <code>selectedIndex</code> value. In this case, there was no setting of the value. We rendered the select tag to the DOM with the value. That's why we can alert the value.</p>

          <h2>Call in the LifeCycle Hook!</h2>
          <p> If you want to show a selection other than the default first option, you will need to do so right after the component is create. For this you can take advantage of the component's lifecylcy hook: <code>componentWasCreate</code>. You can use that to set the value of the select:</p>

          <pre>
            <code class="language-javascript">
componentWasCreated() {
  // Set the value of the component's select tag, 
  // after the component was created:
  this.element.querySelector('select').value = this.state.value
}
            </code>
          </pre>
          <p>When we add the above method to the component, the select tag renders showing the default value of "Coconut". Setting the select tag's state in the <code>componentWasCreated</code> hook causes the <code>selectedIndex</code> value to also be set. Problem solved:</p>

          <p data-height="300" data-theme-id="6688" data-slug-hash="VrYMGP" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi Tuts - Forms-3" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/VrYMGP/">Composi Tuts - Forms-3</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

          <p> </p>

          <h2>Setting Default Values</h2>
          <p>You can also use the <code>componentWasCreate</code> lifecycle hook to set the default values on form elements. Remember, you can easily query any child elements in a component through its <code>this.element</code> property, just as we did above to get the select tag.</p>

          <h2>Handling a Form with Many Inputs</h2>
          <p>If a form has a lot of inputs, trying to keep tract of all of them in your component's state can be difficult. In such a case you want to take another route. Don't bother trying to control the form state with the component state. Let the form be. Instead, at submit time, gather up all the form inputs and then set them to the form's state.</p>
          <p>Let's take our previous example of <code>NameForm</code> and make it work without tracking the input value. Instead we'll just get the value of the input and use that. We can get the input through the component's <code>element</code> property. In the following form we are going to track the value of a checkbox and input. When their state changes, we are going to <code>console.log</code> it:</p>

          <p data-height="300" data-theme-id="6688" data-slug-hash="273bbe674427894ee6bb45533300f8cd" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi Tuts - Forms-4" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/273bbe674427894ee6bb45533300f8cd/">Composi Tuts - Forms-4</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

          <p>&nbsp;</p>
        </div>
        <aside>
          <menu>
            <ul class="tutorials__menu">
              <li class="tutorials__menu__item">
                <a href='./index.html'>Hello World</a>
              </li>
              <li class="tutorials__menu__item">
                  <a href='./introducing-jsx.html'>Introducing JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./rendering-elements.html'>Rendering Elements</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./components-n-props.html'>Components and Props</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./state-n-lifecycle.html'>State and Lifecycle</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./conditional-rendering.html'>Conditional Rendering</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./handling-events.html'>Handling Events</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lists-n-keys.html'>Lists and Keys</a>
              </li>
              <li class="tutorials__menu__item selected">
                <a href='./forms.html'>Forms</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./lifting-state-up.html'>Lifting State Up</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./thinking-in-composi.html'>Thinking in Composi</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./jsx-in-depth.html'>JSX In Depth</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./advanced-state-management.html'>Advanced State Management</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./integrating-other-libs.html'>Integrating with Other Libraries</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./composi-without-jsx.html'>Composi Without JSX</a>
              </li>
              <li class="tutorials__menu__item">
                <a href='./immutable-data.html'>Immutable Data</a>
              </li> 
            </ul>
          </menu>
        </aside>
      </section> 
    </article>
    <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
        </section>
      </footer>
    <script src="../js/prism.min.js"></script>
    <script src="../js/prism-jsx.js"></script>
</body>
</html>