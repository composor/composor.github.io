<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Docs</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='documentation-page'>
  <nav>
    <ul class='nav--menu'>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../index.html">
          <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Composi Logo</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Composi-Logo-Solid" fill="#fff">
                <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
              </g>
            </g>
          </svg>
        <span class='logo__link--text'>Composi</span></a>
      </li>
      <li class='nav--menu__item selected'>
        <a class='nav--menu__item__link' href="./installation.html">Docs</a>
      </li>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../tuts/index.html">Tutorials</a>
      </li>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link external' target='__blank' href="https://github.com/composor/awesome-composi">Resources
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="14px" height="14px" viewBox="0 0 511.626 511.627" style="enable-background:new 0 0 511.626 511.627;"
	 xml:space="preserve">
  <path fill='#fff' d="M392.857,292.354h-18.274c-2.669,0-4.859,0.855-6.563,2.573c-1.718,1.708-2.573,3.897-2.573,6.563v91.361
    c0,12.563-4.47,23.315-13.415,32.262c-8.945,8.945-19.701,13.414-32.264,13.414H82.224c-12.562,0-23.317-4.469-32.264-13.414
    c-8.945-8.946-13.417-19.698-13.417-32.262V155.31c0-12.562,4.471-23.313,13.417-32.259c8.947-8.947,19.702-13.418,32.264-13.418
    h200.994c2.669,0,4.859-0.859,6.57-2.57c1.711-1.713,2.566-3.9,2.566-6.567V82.221c0-2.662-0.855-4.853-2.566-6.563
    c-1.711-1.713-3.901-2.568-6.57-2.568H82.224c-22.648,0-42.016,8.042-58.102,24.125C8.042,113.297,0,132.665,0,155.313v237.542
    c0,22.647,8.042,42.018,24.123,58.095c16.086,16.084,35.454,24.13,58.102,24.13h237.543c22.647,0,42.017-8.046,58.101-24.13
    c16.085-16.077,24.127-35.447,24.127-58.095v-91.358c0-2.669-0.856-4.859-2.574-6.57
    C397.709,293.209,395.519,292.354,392.857,292.354z"/>
  <path fill='#fff' d="M506.199,41.971c-3.617-3.617-7.905-5.424-12.85-5.424H347.171c-4.948,0-9.233,1.807-12.847,5.424
    c-3.617,3.615-5.428,7.898-5.428,12.847s1.811,9.233,5.428,12.85l50.247,50.248L198.424,304.067
    c-1.906,1.903-2.856,4.093-2.856,6.563c0,2.479,0.953,4.668,2.856,6.571l32.548,32.544c1.903,1.903,4.093,2.852,6.567,2.852
    s4.665-0.948,6.567-2.852l186.148-186.148l50.251,50.248c3.614,3.617,7.898,5.426,12.847,5.426s9.233-1.809,12.851-5.426
    c3.617-3.616,5.424-7.898,5.424-12.847V54.818C511.626,49.866,509.813,45.586,506.199,41.971z"/>
</svg></a>
      </li>
    </ul>
  </nav>
  <article class='docs__article'>
    <section>
      <div class='docs'>
          <h1>Functional Components</h1>
          <p class="docs__intro">The component architecture is based on classes. If you favor functional programing over OOP, you might prefer to use functional components. Functional Components are always stateless, so you will want to use them with some kind of state management, such as Redux, Mobx, etc.</p>

          <h2>Virtual Dom</h2>

          <p>When you create components with the Component class, you have a reference for the component's properties, methods, etc. This also provides a point of reference for the virtual dom. In contrast, functional components do not have this reference for their virtual dom. Instead, with functional components, the scope in which the function is invoked becomes the scope for the virtual dom. This means as your project grows and code gets out over many files, the scope of a functional component can be spread across several files. For components this is not a problem. For functional components this means the first time it gets invoked in a new scope, the previous virtual dom will be replaced by a new one. Unless you are creating a list with 10,000 or more items, you won't notice any inefficencies. However, it does result in more layout thrashing than when creating class-based components.</p>

          <h2>Creating Functional Components</h2>
          <p>Functional components use <a href='./jsx.md'>JSX</a> to create markup, but technically you could also use [Hyperx-ES6](https://www.npmjs.com/package/hyperx-es6) with ES6 template literals. Here we're going to look at using JSX.</p>

          <p>To create a functional component, you start with a function, surprise! The function could accept some data, or not. It depends on what the function needs to return. If it is returning static content, no need for a parameter of data. If you want the function component to consume some data, then pass it in as a parameter. And of course you'll need to return some markup. In the example below we have a simple, function component that creates a header:</p>

          <pre><code class="language-javascript">
// title.js:
// We need to import the "h" function:
import {h} from 'composi'

// Define function that takes props for data:
export function Title(props) {
  // Return the header with name from props:
  return (
    &lt;nav>
      &lt;h1>Hello, {props.name}!&lt;/h1>
    &lt;/nav>
  )
}</code>
      </pre>

      <p>If we were to do this with the Composi <code>h</code> function, it would look like this:</p>

      <pre><code class="language-javascript">
import {h} from 'composi'
import {html} from 'hyperscript'

// Define function that takes props for data:
export function Title(name) {
  return h(
    'nav', {}, h(
      'h1', {}, name
    )
  )
}</code>
        </pre>

        <p>Both examples above create virtual nodes, so we will need a way to get them into the DOM. Composi provides the <code>mount</code> function for that purpose. It works similar to React's <code>ReactDOM.render</code> function. It takes two arguments: a tag/vnode and a selector/element in which to insert the markup.</p>

        <p>In our <code>app.js</code> file we import <code>h</code> and <code>mount</code> and then the <code>Title</code> functional component and insert it into the DOM:</p>

        <pre>
          <code class="language-javascript">
// app.js:
import {h, mount} from 'composi'
import {Title} from './components/title'

// Define data for component:
const name = 'World'

// Inject the component into header tag.
// We pass the name variable in as a property in curly braces:
mount(&lt;Title {...{name}}/>, 'header')</code>
</pre>

        <p>Codepen Example:</p>
        <p data-height="300" data-theme-id="6688" data-slug-hash="MOWNMB" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi functional-components-1" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/MOWNMB/">Composi functional-components-1</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>

        <p>This will convert the functional component into a virtual node (vnode) and then convert that into actual nodes inside the header tag. Because a virtual node was created, we can re-render this later using the <code>render</code> function with new data and Composi will patch the DOM efficiently for us. In this case that would involve patching the text node of the <code>h1</code> tag.</p>

        <h2>List with Map</h2>
        <p>Now lets create a functional component that takes an array and outputs a list of items. Notice that we are using <a href='https://css-tricks.com/bem-101/' target='__blank'>BEM</a> notation for class names to make styling easier.</p>
        
        <pre><code class="language-javascript">
// list.js:
import {h} from 'composi'

export function List(props) {
  return (
    &lt;div class='container--list'>
      &lt;ul class='list--fruits'>
        {props.items.map(item => &lt;li class='list--fruits__item'>{props.item}&lt;/li>)}
      &lt;/ul> 
    &lt;/div>
  )
}</code></pre>

        <p>This list is consuming an <code>items</code> array:</p>

        <pre>
          <code class="language-javascript">
// items.js:
export const items = ['Apples', 'Oranges', 'Bananas']</code>
          </pre>
          <p>In our `app.js` file we put this all together:</p>

          <pre>
            <code class="language-javascript">
// app.js:
import {h, mount} from 'composi'
import {Title} from './components/title'
import {List} from './components/list'
import {items} from './items'

// Define data for Title component:
const name = 'World'

// Insert component into header:
mount(&lt;Title {...{name}}/>, 'header')

// Insert list component into section with items data:
mount(&lt;List {...{items}}/>, 'section')</code>
</pre>

          <p>Codepen Example:</p>
          <p data-height="500" data-theme-id="6688" data-slug-hash="aVzzGQ" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi functional-components-2" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/aVzzGQ/">Composi functional-components-2</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          
          <p> </p>
          <h2>Custom Tags</h2>
          <p>We can break this list down a bit using a custom tag for the list item. We will need to pass the data down to the child component through its props:</p>

          <pre>
            <code class="language-javascript">
// list.js:
import {h} from 'composi'

function ListItem(props) {
  return (
    <li class='list--fruits__item'>{props.item}</li>
  )
}

export function List(props) {
  return (
    &lt;div class='container--list'>
      &lt;ul class='list--fruits'>
        {props.items.map(item => &lt;ListItem {...{item}}/>)}
      &lt;/ul> 
    &lt;/div>
  )
}</code>
          </pre>
          <p>Codepen Example:</p>
          <p data-height="450" data-theme-id="6688" data-slug-hash="RjNNYP" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi functional-components-3" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/RjNNYP/">Composi functional-components-3</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p> </p>
          <h2>Data Flows Down</h2>
          <p>When using custom tags inside a functional component, the data flows down, from the parent to the children. There is no two-way data binding. This makes it easy to reason about. If you need a child component to communicate some kind of data change to its parent, you can use events or any pubsub solution from NPM. We have a tiny and efficient pubsub module on NPM called <a target='__blank' href='https://www.npmjs.com/package/pubber'>pubber</a> that is perfect for these situations.</p>

          <h2>Events</h2>

          <p>What if we wanted to make this list dynamic by allowing the user to add items? For that we need events. We'll add a text input and button so the user can enter an item. Since this doesn't involve any data consuming any data, their function just needs to return the markup for the nodes to be created. We'll call this function component <code>ListForm</code>:</p>

          <pre>
            <code class="language-javascript">
// list.js:
import {h} from 'composi'

function ListForm() {
  return (
    &lt;p>
      &lt;input class='list--fruits__input--add' placeholder='Enter Item...' type="text"/>
      &lt;button class='list--fruits__button--add'>Add Item&lt;/button>
    &lt;/p>
  )
}
function ListItem(props) {
  return (
    &lt;li>{props.item}&lt;/li>
  )
}

export function List(props) {
  return (
    &lt;div class='container--list'>
      &lt;ListForm />
      &lt;ul>
        {props.items.map(item => &lt;ListItem {...{item}}/>)}
      &lt;/ul> 
    &lt;/div>
  )
}</code>
          </pre>

          <p> </p>
          <h2>handleEvent Interface</h2>

          <p>We are going to use the handleEvent</code> interface to wire up events for the component. We'll do this in a separate file and import it into our <code>app.js</code> file. To use <code>handleEvent</code> with a functional component we'll need to create an object with the <code>handleEvent</code> function on it. Then we'll use a standar event listener and pass the that object instead of a callback.</p>
          <p>Since we want to be able to add a new fruit to the list, we need to have access to the data and also the function component that renders the list. Therefore we add <code>events</code> object to handle that.</p>
          <p>Notice how we assign the result of mounting the functional component to the variable <code>list</code> and use that as the secton argument of the <code>render</code> function to update the list in the <code>addItem</code> function in the <code>events</code> object:</p>

          <pre>
<code class="language-javascript">import {h, mount, render} from 'composi'
function ListForm() {
  return (
    &lt;p>
      &lt;input class='list-fruits__input-add' placeholder='Enter Item...' type="text"/>
      &lt;button class='list-fruits__button-add'>Add Item&lt;/button>
    &lt;/p>
  )
}
function ListItem(props) {
  return (
    &lt;li class='list-fruit__item'>{props.item}&lt;/li>
  )
}

function List(props) {
  return (
    &lt;div class='container-list'>
      &lt;ListForm />
      &lt;ul class='list-fruit'>
        {props.items.map(item => &lt;ListItem {...{item}}/>)}
      &lt;/ul> 
    &lt;/div>
  )
}

const items = ['Apples', 'Cats', 'Hats']

const events = {
  addItem(e) {
    const input = document.querySelector('.list-fruits__input-add')
    const value = input.value
    if (value) {
      items.push(value)
      // Pass in "list" variable from mounting:
      render(&lt;List {...{items}}/>, list)
      input.value = ''
    } else {
      alert('Please provide an item before submitting!')
    }
  },
  handleEvent(e) {
    e.target.className === 'list-fruits__button-add' && this.addItem(e)
  }
}

const list = mount(&lt;List {...{items}}/>, 'section')

document.querySelector('.container-list').addEventListener('click', events)</code>
          </pre>

          <p>As you can see above, we need to get the value of the input. If the value is truthy, we push it to the items array. Then we re-render the functional component list. Because this is a different scope than <code>app.js</code> where we initially rendered the list, the first time we add an item, the list will be created a new, replacing what was there. That's because this is a different scope than <code>app.js</code>. However, with every new addition, the render function will use the new virtual dom in this scope to patch the DOM efficiently.</p>

          <h2>Using the handleEvent Object</h2>
          <p>Now that we have our <code>handleEvent</code> object defined, we need to wire it up to our component. We'll do that in our <code>app.js</code> file:</p>

 
          <p>Codepen Example:</p>
          <p data-height="450" data-theme-id="6688" data-slug-hash="YEPPJz" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi functional-components-4" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/YEPPJz/">Composi functional-components-4</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p>And that's it. With that we now have an interactive functional component that updates in real time with a virtual dom.</p>

          <h2>Inline Events</h2>
          <p>We could also create a functional component with inline events. We're going to take our interactive list from above and take it to the next level. We'll let the user also delete items. We'll considate all the sub-components into one. We'll also add in private event handlers for the inline events. We've bundled this all up as a Codepen example:</p>
          <p data-height="400" data-theme-id="6688" data-slug-hash="LOJmam" data-default-tab="js,result" data-user="rbiggs" data-embed-version="2" data-pen-title="Composi Functional Inline Events" class="codepen">See the Pen <a href="https://codepen.io/rbiggs/pen/LOJmam/">Composi Functional Inline Events</a> by Robert Biggs (<a href="https://codepen.io/rbiggs">@rbiggs</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
          <p> </p>

          <h2>Component Class Advantages</h2>

          <p>Although you can build a complex app using nothing but functional components, there are certain conveniences when using the Component class. First and foremost is the fact that classes allow you to encapsulate functionality using properties and methods defined directly on the component. The second is the component itself enables more efficient use of the virtual dom because it keeps track of that internally. Because of this, you can have multiple class components in the same container. With functional components, because the virtual dom is created and handle by the <code>render</code> function, there can only be one functional component in each container.</p>
          <p>&nbsp;</p>
          
      </div>
      

      <aside>
        <menu>
          <ul class="docs__menu">
            <li class="docs__menu__item">
              <a href='./installation.html'>Installation</a>
            </li>
            <li class="docs__menu__item">
              <a href='./render.html'>Mount/Render</a>
            </li>
            <li class="docs__menu__item selected">
              <a href='./functional-components.html'>Functional Components</a>
            </li>
            <li class="docs__menu__item">
              <a href='./component-instance.html'>Component Instance</a>
            </li>
            <li class="docs__menu__item">
              <a href='./extending-component.html'>Extending Component</a>
            </li>
            <li class="docs__menu__item">
              <a href='./state.html'>State</a>
            </li>
            <li class="docs__menu__item">
              <a href='./jsx.html'>JSX</a>
            </li>
            <li class="docs__menu__item">
              <a href='./h.html'>H for Hyperscript</a>
            </li>
            <li class="docs__menu__item">
              <a href='./template-literals.html'>Template Literals</a>
            </li>
            <li class="docs__menu__item">
              <a href='./styles.html'>Styles</a>
            </li>
            <li class="docs__menu__item">
              <a href='./lifecycle-methods.html'>Lifecycle Methods</a>
            </li>
            <li class="docs__menu__item">
              <a href='./events.html'>Events</a>
            </li>
            <li class="docs__menu__item">
              <a href='./hydration.html'>Hydration</a>
            </li>
            <li class="docs__menu__item">
              <a href='./deployment.html'>Deployment</a>
            </li>
            <li class="docs__menu__item">
              <a href='./api.html'>API</a>
            </li>
            <li class="docs__menu__item">
              <a href='./about.html'>About</a>
            </li>
          </ul>
        </menu>
      </aside>
    </section> 
  </article>
  <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
      </section>
    </footer>
  <script src="../js/prism.min.js"></script>
  <script src="../js/prism-jsx.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115293685-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-115293685-1');
  </script>
</body>
</html>