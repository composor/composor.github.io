<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="description" content="Composi is a JavaScript library for creating component-based interfaces. It uses the virtual dom to make efficient updates to the DOM based on a component's data or state.">
  <meta name="keywords" content="javascript, framework, performance, small, fast, UI, programming, code, component, composi, chocolatechipui, chocolatechip-ui, reactive, virtual dom">
  <title>Composi - Docs</title>
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/prism-tomorrow.css">
</head>
<body class='documentation-page'>
  <nav>
    <ul class='nav--menu'>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../index.html">
          <svg id='composi-logo' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Composi Logo</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g id="Composi-Logo-Solid" fill="#fff">
                <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
              </g>
            </g>
          </svg>
        <span class='logo__link--text'>Composi</span></a>
      </li>
      <li class='nav--menu__item selected'>
        <a class='nav--menu__item__link' href="./installation.html">Docs</a>
      </li>
      <li class='nav--menu__item'>
        <a class='nav--menu__item__link' href="../tuts/index.html">Tutorials</a>
      </li>
    </ul>
  </nav>
  <article class='docs__article'>
    <section>
      <div class='docs'>
          <h1>Lifecycle Methods</h1>
          <p class="docs__intro">Composi has the following five lifecycle methods:</p>

          <ol>
            <li>beforeCreateComponent</li>
            <li>componentWasCreated</li>
            <li>componentWillUpdate</li>
            <li>componentDidUpdate</li>
            <li>componentWillUnmount</li>
          </ol>

          <p>Lifecycle methods are hooks that let you implement maintenance, register or remove events, and clean up code based on the status of a component from when it is created and injected into the DOM, when it is updated and when it is removed from the DOM.</p>

          <p><code>beforeCreateComponent</code> is executed before the component is created and inserted into the DOM.</p>
          <p><code>componentWasCreated</code> is executed after the component is inserted into the DOM.</p>
          <p><code>componentWillUpdate</code> is executed right before the component is updated. If a component is updated with the same data, then no update will occur, meaning this will not execute.</p>
          <p><code>componentDidUpdate</code> is executed immediately after the component was updated. If a component is updated with the same data, then no update will occur, meaning this will not execute.</p>
          <p><code>componentWillUnmount</code> is executed before a component is unmounted with its <code>unmount</code> method.</p>

          <h2>Lifecycle Methods are Asynchronous</h2>
          <p>When using lifecycle methods, be aware that they are asynchronous. For example, with `beforeCreateComponent` your component will probably be created and inserted into the DOM before your method can finish. Similarly, when using `componentWillUnmount`, the component will probably be unmounted and destroyed before your code in this method completes. If you want to handle these two in a synchronous manner for tighter control, you have two choices. Use a method that returns a promise, or use the <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/async_function' target='__blank'>ES7 async functions</a>. If your browser target includes IE9, you will need to polyfill promises for either of these to work.</p>

          <h2>Order of Execution</h2>
          <p>The first time a component is rendered, <code>beforeCreateComponent</code> and <code>componentWasCreated</code> will be executed. <code>componentWillUpdate</code> and <code>componentWillUpdate</code> will not be executed at this time. After the component was created, each render will fire <code>componentWillUpdate</code> and <code>componentWillUpdate</code>. So, if you wanted to do something when the component is initially created and after it updates, you would need to do this:</p>

          <pre>
            <code class="language-javascript">
class List extends Component {
  //... setup here.
  componentWasCreated() {
    // Do stuff after component was created.
  }
  componentDidUpdate() {
    // Do stuff every time component is updated.
  }
}</code>
          </pre>
          <p> </p>
          <h2>Lifecycle Methods with Component Instance</h2>
          <p>In the following example we use <code>componentWasCreated</code> to start a timer and <code>componentWillUnmount</code> to terminate the timer.</p>
          <p>In our first example of lifecycle methods, we'll use a Component instance. This poses several problems for the lifecycle methods. They do not have access to the component itself. This forces us to use global variables to pass things around.</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

function tick() {
  clock.setState({
    time: new Date()
  });
}
let timerID
const clock = new Component({
  root: '#clock',
  state: {time: new Date()},
  render: (date) => {
    return (
    &lt;div>
      &lt;h2>The Current Time&lt;/h2>
      &lt;p>It is {date.time.toLocaleTimeString()}.&lt;/p>
    &lt;/div>
  )},

  componentWasCreated() {
    timerID = setInterval(
      () => {
        tick()
      },
      1000
    );
  },

  componentWillUnmount() {
    clearInterval(timerID);
  }
})

clock.update()</code>
          </pre>
          <p> </p>
          <h2>Lifecycle Methods with Extended Component</h2>
          <p>When we create a new component by extending the Component class, we can access component properties directly through the `this` keyword. This is so because we define the lifecycle methods as class methods. Notice how we do this in the example below.</p>

          <pre>
            <code class="language-javascript">
import {h, Component} from 'composi'

class Clock extends Component {
  constructor(props) {
    super(props)
    this.root = '#clock'
    this.state = {date: new Date()};
  }

  render() {
    return (
      &lt;div>
        &lt;h2>Current Time&lt;/h2>
        &lt;h2>It is {this.getLocalTime()}.&lt;/h2>
      &lt;/div>
    )
  }

  getLocalTime() {
    return this.state.date.toLocaleTimeString()
  }

  componentWasCreated() {
    // Store timer referrence so we can clear it later:
    this.timerID = setInterval(
      () => this.tick(),
      1000
    );
  }

  // If component is unmounted, end interval loop:
  componentWillUnmount() {
    clearInterval(this.timerID);
  }

  tick() {
    this.setState({
      time: new Date()
    });
  }
}

// Instantiated clock will create and start it:
const clock = new Clock()</code>
          </pre>
          <p>&nbsp;</p>
          
      </div>

      <aside>
        <menu>
          <ul class="docs__menu">
            <li class="docs__menu__item">
              <a href='./installation.html'>Installation</a>
            </li>
            <li class="docs__menu__item">
              <a href='./render.html'>Render</a>
            </li>
            <li class="docs__menu__item">
              <a href='./functional-components.html'>Functional Components</a>
            </li>
            <li class="docs__menu__item">
              <a href='./component-instance.html'>Component Instance</a>
            </li>
            <li class="docs__menu__item">
              <a href='./extending-component.html'>Extending Component</a>
            </li>
            <li class="docs__menu__item">
              <a href='./state.html'>State</a>
            </li>
            <li class="docs__menu__item">
              <a href='./jsx.html'>JSX</a>
            </li>
            <li class="docs__menu__item">
              <a href='./h.html'>H for Hyperscript</a>
            </li>
            <li class="docs__menu__item">
              <a href='./template-literals.html'>Template Literals</a>
            </li>
            <li class="docs__menu__item">
              <a href='./styles.html'>Styles</a>
            </li>
            <li class="docs__menu__item selected">
              <a href='./lifecycle-methods.html'>Lifecycle Methods</a>
            </li>
            <li class="docs__menu__item">
              <a href='./events.html'>Events</a>
            </li>
            <li class="docs__menu__item">
              <a href='./redux-mobx.html'>Redux and Mobx</a>
            </li>
            <li class="docs__menu__item">
              <a href='./hydration.html'>Hydration</a>
            </li>
            <li class="docs__menu__item">
              <a href='./deployment.html'>Deployment</a>
            </li>
            <li class="docs__menu__item">
              <a href='./about.html'>About</a>
            </li>
          </ul>
        </menu>
      </aside>
    </section> 
  </article>
  <footer>
      <section>
        <svg id='composi-logo-footer' viewBox="0 0 300 300" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>Composi Logo</title>
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Composi-Logo-Solid" fill="rgba(255,255,255,0.5)">
              <path d="M1.77635684e-15,0 L95,0 L95,38 L209,38 L209,0 L300,0 L300,94 L265,93.8571663 L265,209 L300,209 L300,300 L209,300 L209,265 L95,265 L95,300 L1.77635684e-15,300 L1.77635684e-15,209 L40,209 L40,94 L1.77635684e-15,93.8571663 L1.77635684e-15,0 Z M107,107 L107,192 L192,192 L192,107 L107,107 Z" id="Combined-Shape"></path>
            </g>
          </g>
        </svg>
        <h3>Composi is open source (MIT) and available on <a href='https://github.com/composor/composi' target='__blank'>Github</a> and <a href="https://www.npmjs.com/package/composi" target='__blank'>NPM</a>.</h3>
      </section>
    </footer>
  <script src="../js/prism.min.js"></script>
  <script src="../js/prism-jsx.js"></script>
</body>
</html>